{"ast":null,"code":"// api/new-meetup\n\n/* the folder name should name api inside pages folder,it's not return html code but about accept incoming HTTP requests with JSON  data attached to them\r\nApi routes allow you to build your own api endpoints,any file inside api will turn to api routes>>endpoints that targeted by requests and should receive json and return json\r\ninside this file is server side code,api routes only run on server */\nimport { MongoClient } from \"mongodb\";\n\nasync function handler(req, res) {\n  //now this func just accept post request\n  if (req.method === \"POST\") {\n    const data = req.body;\n    console.log(data);\n    /* const { title, image, address, description } = data; */\n    //this code will never run on client side,this secure place to store credential\n\n    const client = await MongoClient.connect(\"mongodb+srv://Abood:Abood123ax@next-js.syz3y0l.mongodb.net/?retryWrites=true&w=majority\");\n    console.log(client);\n    const db = client.db();\n    const meetupsCollection = db.collection(\"meetups\"); //in mongodb the document is an js object so we can pass object to collection,so no need to use destructuring\n\n    const result = await meetupsCollection.insertOne(data);\n    client.close(); //this status method called on response to set a HTTP status code of the response which will return,201 to indicate that something was inserted successfully\n\n    res.status(201).json({\n      message: \"meetups inserted\"\n    });\n  }\n}\n\nexport default handler;","map":{"version":3,"sources":["D:/react/06-onwards-to-a-bigger-project-starting-project/pages/api/new-meetup.js"],"names":["MongoClient","handler","req","res","method","data","body","console","log","client","connect","db","meetupsCollection","collection","result","insertOne","close","status","json","message"],"mappings":"AAAA;;AACA;AACA;AACA;AACA,SAASA,WAAT,QAA4B,SAA5B;;AACA,eAAeC,OAAf,CAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC;AAC/B;AACA,MAAID,GAAG,CAACE,MAAJ,KAAe,MAAnB,EAA2B;AACzB,UAAMC,IAAI,GAAGH,GAAG,CAACI,IAAjB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;AACA;AACA;;AACA,UAAMI,MAAM,GAAG,MAAMT,WAAW,CAACU,OAAZ,CACnB,yFADmB,CAArB;AAGAH,IAAAA,OAAO,CAACC,GAAR,CAAYC,MAAZ;AACA,UAAME,EAAE,GAAGF,MAAM,CAACE,EAAP,EAAX;AACA,UAAMC,iBAAiB,GAAGD,EAAE,CAACE,UAAH,CAAc,SAAd,CAA1B,CAVyB,CAWzB;;AACA,UAAMC,MAAM,GAAG,MAAMF,iBAAiB,CAACG,SAAlB,CAA4BV,IAA5B,CAArB;AACAI,IAAAA,MAAM,CAACO,KAAP,GAbyB,CAczB;;AACAb,IAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAArB;AACD;AACF;;AACD,eAAelB,OAAf","sourcesContent":["// api/new-meetup\r\n/* the folder name should name api inside pages folder,it's not return html code but about accept incoming HTTP requests with JSON  data attached to them\r\nApi routes allow you to build your own api endpoints,any file inside api will turn to api routes>>endpoints that targeted by requests and should receive json and return json\r\ninside this file is server side code,api routes only run on server */\r\nimport { MongoClient } from \"mongodb\";\r\nasync function handler(req, res) {\r\n  //now this func just accept post request\r\n  if (req.method === \"POST\") {\r\n    const data = req.body;\r\n    console.log(data);\r\n    /* const { title, image, address, description } = data; */\r\n    //this code will never run on client side,this secure place to store credential\r\n    const client = await MongoClient.connect(\r\n      \"mongodb+srv://Abood:Abood123ax@next-js.syz3y0l.mongodb.net/?retryWrites=true&w=majority\"\r\n    );\r\n    console.log(client);\r\n    const db = client.db();\r\n    const meetupsCollection = db.collection(\"meetups\");\r\n    //in mongodb the document is an js object so we can pass object to collection,so no need to use destructuring\r\n    const result = await meetupsCollection.insertOne(data);\r\n    client.close();\r\n    //this status method called on response to set a HTTP status code of the response which will return,201 to indicate that something was inserted successfully\r\n    res.status(201).json({ message: \"meetups inserted\" });\r\n  }\r\n}\r\nexport default handler;\r\n"]},"metadata":{},"sourceType":"module"}